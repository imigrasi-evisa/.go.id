<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pembayaran Denda Paspor Hilang</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #fff;
      margin: 0;
      padding: 0;
      color: #212529;
    }
    /* Navbar */
    .navbar {
      background: #0d3b66;
      color: #fff;
      padding: 12px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .navbar img {
      height: 45px;
    }
    .navbar-title {
      font-size: 12px;
      line-height: 1.3;
      text-align: left;
      margin-left: 10px;
      flex: 1;
    }
    .navbar-actions {
      margin-left: auto;
    }
    .navbar-actions button {
      background: #007bff;
      color: #fff;
      padding: 6px 12px;
      border-radius: 3px;
      font-size: 13px;
      border: none;
      cursor: pointer;
    }
    .navbar-actions button:hover {
      background: #0069d9;
    }
    /* Step progress */
    .steps {
      margin: 20px;
    }
    .step {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
    }
    .step-icon {
      width: 22px;
      height: 22px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: bold;
      color: #fff;
      margin-right: 8px;
    }
    .done { background: #28a745; }
    .pending { background: #6c757d; }
    .current { background: #ffc107; }
    .step button {
      flex: 1;
      background: #0d3b66;
      color: #fff;
      border: none;
      padding: 10px;
      text-align: left;
      border-radius: 3px;
      font-size: 14px;
    }
    /* Card Section */
    .card {
      margin: 20px;
      background: #fff;
      border-radius: 5px;
      padding: 15px;
      border: 1px solid #ddd;
    }
    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 3px;
      font-size: 14px;
      cursor: pointer;
    }
    .btn-back {
      background: #17a2b8;
      color: #fff;
    }
    .btn-back:hover {
      background: #138496;
    }
    .btn-pending {
      background: #dc3545;
      color: #fff;
      margin-left: 10px;
    }
    .btn-pending:hover {
      background: #c82333;
    }
    h3 {
      font-size: 16px;
      margin-top: 15px;
      margin-bottom: 10px;
      color: #0d3b66;
    }
    .info {
      margin: 6px 0;
      font-size: 14px;
    }
    /* Profile Photo */
    .profile-photo {
      display: block;
      margin: 10px 0;
      height: 120px;
      border-radius: 5px;
      object-fit: cover;
    }
    /* Download button */
    .download-schedule-btn {
      background: #28a745;
      color: white;
      border: none;
      border-radius: 5px;
      padding: 8px 16px;
      font-size: 14px;
      cursor: pointer;
      margin: 10px 0;
      display: flex;
      align-items: center;
      justify-content: center;
      width: fit-content;
    }
    .download-schedule-btn:hover {
      background: #218838;
    }
    .download-schedule-btn i {
      margin-right: 5px;
    }
    /* Small buttons */
    .detail-btn, .upload-btn, .valid-btn {
      display: inline-block;
      margin-top: 5px;
      padding: 6px 12px;
      font-size: 12px;
      border: none;
      border-radius: 3px;
      color: #fff;
      cursor: pointer;
    }
    .detail-btn { background: #0d3b66; }
    .detail-btn:hover { background: #062d4a; }
    .upload-btn { background: #007bff; }
    .upload-btn:hover { background: #0069d9; }
    .valid-btn { background: #28a745; }
    .valid-btn:hover { background: #218838; }
    /* Hidden input */
    input[type="file"] {
      display: none;
    }
    /* Catatan merah */
    .note {
      margin: 25px 20px;
      font-size: 14px;
      color: red;
      font-weight: bold;
      border: 1px solid #f5c6cb;
      background: #f8d7da;
      padding: 12px;
      border-radius: 5px;
    }
    /* Payment Section */
    .payment-section {
      background: #f8f9fa;
      border-radius: 5px;
      padding: 15px;
      margin-top: 15px;
      border: 1px solid #ddd;
    }
    .payment-info {
      display: flex;
      justify-content: space-between;
      margin: 8px 0;
      font-size: 14px;
    }
    .payment-amount {
      font-weight: bold;
      font-size: 18px;
      color: #dc3545;
    }
    .countdown {
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      color: #dc3545;
      margin: 15px 0;
      padding: 10px;
      background: #fff;
      border-radius: 5px;
      border: 1px solid #ddd;
    }
    /* Footer */
    .footer {
      background: #0d3b66;
      color: #fff;
      padding: 20px;
      text-align: center;
    }
    .footer img {
      height: 50px;
      margin-bottom: 10px;
    }
    .footer p {
      margin: 5px 0;
      font-size: 13px;
    }
    /* Toast notification */
    .toast {
      visibility: hidden;
      min-width: 250px;
      margin-left: -125px;
      background-color: #333;
      color: #fff;
      text-align: center;
      border-radius: 5px;
      padding: 16px;
      position: fixed;
      z-index: 1;
      left: 50%;
      bottom: 30px;
    }
    .toast.show {
      visibility: visible;
      animation: fadein 0.5s, fadeout 0.5s 2.5s;
    }
    @keyframes fadein {
      from {bottom: 0; opacity: 0;} 
      to {bottom: 30px; opacity: 1;}
    }
    @keyframes fadeout {
      from {bottom: 30px; opacity: 1;} 
      to {bottom: 0; opacity: 0;}
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <div class="navbar">
    <img src="logo.png" alt="Logo">
    <div class="navbar-title">
      KEMENTRIAN HUKUM DAN HAK ASASI MANUSIA<br>
      DIREKTORAT JENDERAL IMIGRASI
    </div>
    <div class="navbar-actions">
      <button>Beranda</button>
    </div>
  </div>
  
  <!-- Steps -->
  <div class="steps">
    <div class="step">
      <div class="step-icon done">✔</div>
      <button>Permohonan</button>
    </div>
    <div class="step">
      <div class="step-icon current">2</div>
      <button>Pembayaran Denda</button>
    </div>
    <div class="step">
      <div class="step-icon pending">○</div>
      <button>Cetak Bukti Pembayaran</button>
    </div>
  </div>
  
  <!-- Card -->
  <div class="card">
    <h3>Informasi Permohonan</h3>
    <button class="btn btn-back">Kembali</button>
    <button class="btn btn-pending">Menunggu Pembayaran</button>
    
    <h3>Informasi Paspor Hilang</h3>
    <div class="info">No. Referensi: 1372500042407971</div>
    <div class="info">Status: Menunggu Pembayaran</div>
    <div class="info">Kantor Imigrasi: KELAS 1 TPI YOGYAKARTA</div>
    
    <h3>Informasi Pribadi</h3>
    <img class="profile-photo" src="https://z-cdn-media.chatglm.cn/files/6f210a0c-75c6-44a9-aab0-f43c2dcbc2ae_paspor%20hilang.jpg?auth_key=1789354177-213f796f02884f228b8fa206eea78d9c-0-ac73acb41b1b217bb0f1cccc0ecd0d9b" alt="Profile Photo">
    <button class="download-schedule-btn" id="downloadBtn">
      <i>↓</i> Unduh Surat Jadwal Kedatangan
    </button>
    <div class="info">Nama Lengkap: Fatimah</div>
    <div class="info">NIK: 3323106611780001</div>
    <div class="info">Jenis Kelamin: Perempuan</div>
    <div class="info">Tempat, Tanggal Lahir: Temanggung, 26 November 1978</div>
    <div class="info">Agama: Islam</div>
    <div class="info">Status Pernikahan: Menikah</div>
    <div class="info">Pekerjaan: MENGURUS RUMAH TANGGA</div>
    <div class="info">Kewarganegaraan: WNI</div>
    
    <h3>Informasi Alamat</h3>
    <div class="info">Alamat: Blimbing, Temanggung, Jawa Tengah</div>
    
    <h3>Informasi Paspor</h3>
    <div class="info">Masa Berlaku Hingga: 26 November 2017</div>
    
    <!-- Payment Section -->
    <div class="payment-section">
      <h3>Informasi Pembayaran</h3>
      <div class="payment-info">
        <span>Kode Pembayaran:</span>
        <span>1372500042407971</span>
      </div>
      <div class="payment-info">
        <span>Jenis Pembayaran:</span>
        <span>Denda Paspor Hilang</span>
      </div>
      <div class="payment-info">
        <span>Total Denda:</span>
        <span class="payment-amount">Rp 911.421,00</span>
      </div>
      <div class="payment-info">
        <span>Status Pembayaran:</span>
        <span style="color: #dc3545; font-weight: bold;">Menunggu Pembayaran</span>
      </div>
      
      <div class="countdown" id="countdown">
        Memuat...
      </div>
      
      <div class="info">
        Bukti Tiket 
        <label for="file-upload" class="upload-btn">Upload</label>
        <input id="file-upload" type="file" accept="image/*,.pdf">
      </div>
      <button class="valid-btn">Saya menyatakan data di atas adalah benar</button>
    </div>
  </div>
  
  <!-- Catatan merah -->
  <div class="note">
    ⚠️ Perhatian: Anda wajib melakukan pembayaran denda dalam waktu 2 jam, agar permohonan paspor hilang Anda dapat segera diproses. Harap upload bukti tiket perjalanan Anda sebagai kelengkapan dokumen. Jika melewati batas waktu, permohonan Anda akan dibatalkan dan harus mengajukan kembali.
  </div>
  
  <!-- Footer -->
  <div class="footer">
    <img src="logo.png" alt="Logo">
    <p>Direktorat Jenderal Imigrasi</p>
    <p>Kementerian Hukum dan Hak Asasi Manusia Republik Indonesia</p>
    <p>Jl. H.R. Rasuna Said Kav. 8-9, Kuningan, Jakarta Selatan</p>
    <p>Telepon: 1500-110 | Website: www.imigrasi.go.id</p>
  </div>
  
  <!-- Toast notification -->
  <div id="toast" class="toast">Surat jadwal kedatangan berhasil diunduh!</div>
  
  <script>
    // Fungsi untuk memulai countdown
    function startCountdown(startTime, display) {
      // Hitung sisa waktu
      var timer = Math.max(0, 7200 - Math.floor((Date.now() - startTime) / 1000));
      
      var interval = setInterval(function () {
        var hours = parseInt(timer / 3600, 10);
        var minutes = parseInt((timer % 3600) / 60, 10);
        var seconds = parseInt(timer % 60, 10);
        
        hours = hours < 10 ? "0" + hours : hours;
        minutes = minutes < 10 ? "0" + minutes : minutes;
        seconds = seconds < 10 ? "0" + seconds : seconds;
        
        display.textContent = "Sisa Waktu Pembayaran: " + hours + ":" + minutes + ":" + seconds;
        
        if (--timer < 0) {
          clearInterval(interval);
          display.textContent = "Waktu Pembayaran Habis";
          display.style.color = "#000";
          display.style.background = "#f8d7da";
          localStorage.removeItem('paymentStartTime');
          
          // Tambahkan notifikasi waktu habis
          var note = document.querySelector('.note');
          note.innerHTML = "⚠️ Perhatian: Waktu pembayaran Anda telah habis. Permohonan Anda dibatalkan. Silakan ajukan kembali permohonan paspor hilang Anda.";
          note.style.display = "block";
          
          // Nonaktifkan tombol upload dan validasi
          document.querySelector('.upload-btn').disabled = true;
          document.querySelector('.valid-btn').disabled = true;
          document.querySelector('.upload-btn').style.background = "#6c757d";
          document.querySelector('.valid-btn').style.background = "#6c757d";
          
          // Nonaktifkan tombol download
          document.getElementById('downloadBtn').disabled = true;
          document.getElementById('downloadBtn').style.background = "#6c757d";
        }
      }, 1000);
    }
    
    window.onload = function () {
      var display = document.querySelector('#countdown');
      var startTime;
      
      // Cek apakah sudah ada waktu mulai di localStorage
      if (localStorage.getItem('paymentStartTime')) {
        startTime = parseInt(localStorage.getItem('paymentStartTime'));
        
        // Hitung sisa waktu
        var elapsedTime = Math.floor((Date.now() - startTime) / 1000);
        var remainingTime = 7200 - elapsedTime;
        
        // Jika waktu sudah habis
        if (remainingTime <= 0) {
          display.textContent = "Waktu Pembayaran Habis";
          display.style.color = "#000";
          display.style.background = "#f8d7da";
          localStorage.removeItem('paymentStartTime');
          
          // Tambahkan notifikasi waktu habis
          var note = document.querySelector('.note');
          note.innerHTML = "⚠️ Perhatian: Waktu pembayaran Anda telah habis. Permohonan Anda dibatalkan. Silakan ajukan kembali permohonan paspor hilang Anda.";
          note.style.display = "block";
          
          // Nonaktifkan tombol upload dan validasi
          document.querySelector('.upload-btn').disabled = true;
          document.querySelector('.valid-btn').disabled = true;
          document.querySelector('.upload-btn').style.background = "#6c757d";
          document.querySelector('.valid-btn').style.background = "#6c757d";
          
          // Nonaktifkan tombol download
          document.getElementById('downloadBtn').disabled = true;
          document.getElementById('downloadBtn').style.background = "#6c757d";
          return;
        }
      } else {
        // Simpan waktu mulai pertama kali
        startTime = Date.now();
        localStorage.setItem('paymentStartTime', startTime);
      }
      
      startCountdown(startTime, display);
      
      // Setup download button
      document.getElementById('downloadBtn').addEventListener('click', function() {
        // Get the HTML content
        var htmlContent = document.documentElement.outerHTML;
        
        // Create a blob with the HTML content
        var blob = new Blob([htmlContent], {type: 'text/html'});
        
        // Create a URL for the blob
        var url = URL.createObjectURL(blob);
        
        // Create a temporary anchor element
        var a = document.createElement('a');
        a.href = url;
        
        // Set the filename with current date and time
        var now = new Date();
        var dateStr = now.getFullYear() + '-' + 
                      ('0' + (now.getMonth() + 1)).slice(-2) + '-' + 
                      ('0' + now.getDate()).slice(-2);
        var timeStr = ('0' + now.getHours()).slice(-2) + '-' + 
                      ('0' + now.getMinutes()).slice(-2) + '-' + 
                      ('0' + now.getSeconds()).slice(-2);
        a.download = 'Surat_Jadwal_Kedatangan_' + dateStr + '_' + timeStr + '.html';
        
        // Trigger the download
        document.body.appendChild(a);
        a.click();
        
        // Clean up
        setTimeout(function() {
          document.body.removeChild(a);
          URL.revokeObjectURL(url);
          
          // Show toast notification
          var toast = document.getElementById('toast');
          toast.className = "toast show";
          setTimeout(function(){ toast.className = toast.className.replace("show", ""); }, 3000);
        }, 100);
      });
    };
  </script>
</body>
</html>
